## VLAN(Virtual LAN = 가상 LAN)

- 다른 유사한 기기와의 논리적 연결
- 특징
    - 같은 스위치에서 기기의 다른 그룹의 분할을 제공
    - 조직 관리를 더 잘 할 수 있음
    - 브로드캐스트, 멀티캐스트, 유니캐스트를 VLAN 마다 나눌 수 있음
    - 브로드캐스트 도메인이 작아짐
    - 각 VLAN이 자신의 독특한 IP 주소를 가짐
- 장점
    - 브로드캐스트 도메인이 작아짐
    - 보안이 향상됨
    - IT 효율성이 향상됨
    - 비용이 줄어듬
    - 수행이 더 좋아짐
    - 관리가 간단함
- Default VLAN
    - 기본 VLAN
    - 삭제하거나 이름을 바꿀 수 없음
- VLAN의 종류
    - Data VLAN (Voice VLAN과 유사)
        - 대역폭 보증
        - 높은 QoS(Quality of Service)
        - 혼선 회피
        - source에서 destination 까지 150ms를 보증
    - Native VLAN
        - L2 패킷에서 VLAN ID 부분이 없음
        - 태그가 붙지 않음
    - Management VLAN
        - SVI 설정 등이 포함
- VLAN Trunk
    - point-to-point link (점대점 연결 = 1 : 1 연결)
    - Trunk 기능
        - 하나 이상의 VLAN 허용
        - 모든 네트워크에서 VLAN 사용
        - 1 ~ 1001 번까지는 우리가 나눌 수 있음
        - 모든 VLAN 사용
        - IEEE 802.1Q 사용
- VLAN 없는 네트워크
    - VLAN이 없으면 모든 장비에 신호 보냄
    - 그러면 통신의 질이 낮아짐
- VLAN Tag
    - **VID (VLAN ID)**
        - 이것이 없으면 구분 불가능
- Native VLANs and 802.1Q Tagging
    - Native VLAN은 기본적으로 태그가 붙지 않음
- VLAN 설정
    - 1 ~ 1001 은 건드릴 수 있음
    - 1002 ~ 1005 에서는 건드릴 수 없음
    - VLAN 정보는 vlan.dat에 저장됨
    - 1006~4095는 통신사에서 사용(사실상 볼 일 없음)
- Dynamic Trunking Protocol
    - 특정 포트의 모드를 동적으로 바꿈 (ex. 상대 상태가 access면 자신의 상태도 access로 변경)
- Negotiated Interface Modes
    - access
        - 확실히 access
    - dynamic auto
        - 상대방이 desiable 이나 trunk 일 때만 trunk
    - dynamic desirable
        - 상대방이 뭐든 간에 trunk
    - trunk
        - 확실히 trunk

## Inter-VLAN

- 한 VLAN에서 다른 VLAN으로 네트워크 트래픽을 전송할 수 있는 과정
- Legacy Inter-VLAN routing
    - 옛날에 사용하던 것
    - 라우터에 여러가지 포트 사용
- Router-on-a-Stick Inter-VLAN
    - 하나의 물리적 포트를 여러 개의 논리적 포트로 나눔
    - 기존의 Legacy Inter-VLAN routing의 한계점을 넘어섬
    - 각각의 서브인터페이스에 IP 주소 입력 가능
- Inter-VLAN Rouing on a Layer 3 Switch
    - SVI Interface 를 사용해 VLAN 구성
    - L3 스위치를 사용하면 사실상 대역폭이 무한
    - 스위치에서 라우터로 가는 포트가 필요 없음
    - 그러나 L3 스위치의 가격이 매우 비쌈
- TroubleShoot Inter-VLAN
    - Missing VLANs
        - show vlan [brief], show interfaces switchport ping
    - Switch Trunk Port Issues
        - show interface trunk, show running-config
    - Switch Access Port Issues
        - show interfaces switchport, show running-config interface ipconfig
    - Router Configurations Issues
        - show ip interface brief, show interfaces